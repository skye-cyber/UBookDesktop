<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/styles.css" rel="stylesheet">
    <title>Urantia Book Desktop</title>
</head>
<body class="bg-gray-200 dark:bg-slate-800 flex transition-colors duration-1000 overflow-y-hidden">
    <header class="fixed flex items-center w-full max-h-[8vh] top-0 justify-between px-4 py-3 bg-blue-700 dark:bg-slate-950 shadow-md transition-colors duration-700 z-50">
        <section class="relative flex items-center select-none">
            <!-- 3-line Hamburger Icon -->
            <button id="sidepane-toggle" class="flex flex-col justify-between h-6 w-6 focus:outline-none hover:text-cyan-400">
                <svg class="w-6 h-6 stroke-white dark:stroke-white" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
            </button>
        </section>
        <!-- Search Bar -->
        <div id="search-container" class="opacity-0 pointer-events-none flex-1 mx-4 tranform transition-all duration-700 ease-in-out">
            <input
            type="text"
            placeholder="Search..."
            class="w-full px-4 py-2 bg-gray-100 dark:bg-gray-800 rounded-lg text-gray-800 dark:text-gray-50 focus:outline-none"
            />
        </div>

        <!-- 3 Dots Icon (Vertical) -->
        <button id="search-toggle" class="text-gray-800 dark:text-gray-200">
            <svg class="w-6 h-6 stroke-white dark:stroke-white fill-white" viewBox="0 0 20 20">
            <path d="M10 3a1.5 1.5 0 100 3 1.5 1.5 0 000-3zM10 8.5a1.5 1.5 0 100 3 1.5 1.5 0 000-3zM10 14a1.5 1.5 0 100 3 1.5 1.5 0 000-3z" />
            </svg>
        </button>
    </header>

    <!-- Sidebar left -->
    <section id="sidepaneMask" class="bg-slate-700/10 -translate-x-full mt-[8vh] w-fit fixed inset-0 transform transition-transform transition-colors duration-700 ease-in-out z-50">
        <div id="sidepane" class="relative bg-sky-800 dark:bg-[#00445f] w-72 h-[calc(100vh-7vh)] shadow-lg transform transition-transform -translate-x-full transition-colors duration-700 ease-in-out shadow-inner">
            <div class="flex items-center p-4">
                <img class="h-12 w-16 rounded-full" src="images/UBook.png">
                <h1 class="text-white dark:text-gray-200 text-2xl ml-2">Urantia Book Desktop</h1>
            </div>

            <section class="h-fit max-h-[72%] overflow-y-auto select-none bg-blue-500 dark:bg-[#00557f] rounded-[4px]">
                <ul class="mt-3" >
                    <li class="flex items-center p-2 text-white dark:text-gray-200 hover:bg-blue-400 dark:hover:bg-[#5656ff]/70 cursor-pointer" onclick="SetForeword();">
                        üìñ Foreword
                    </li>
                    <li class="flex items-center p-2 text-white dark:text-gray-200 hover:bg-blue-400 dark:hover:bg-[#5656ff]/70 cursor-pointer" onclick="SetSuperUniverse();">
                        <span class="bg-pink-600 rounded-full px-0.5">üåÄ</span>&nbsp; The Central and Superuniverses
                    </li>
                    <li class="flex items-center p-2 text-white dark:text-gray-200 hover:bg-blue-400 dark:hover:bg-[#5656ff]/70 cursor-pointer" onclick="SetLocalUniverse();">
                        üåç The Local Universe
                    </li>
                    <li class="flex items-center p-2 text-white dark:text-gray-200 hover:bg-blue-400 dark:hover:bg-[#5656ff]/70 cursor-pointer" onclick="SetHistoryOfUrantia();">
                        üìú The History of Urantia
                    </li>
                    <li class="flex items-center p-2 text-white dark:text-gray-200 hover:bg-blue-400 dark:hover:bg-[#5656ff]/70 cursor-pointer" onclick="SetJesusTeachings();">
                        ‚úùÔ∏è The Life and Teachings of Jesus
                    </li>
                    <li class="flex items-center p-2 text-white dark:text-gray-200 hover:bg-blue-400 dark:hover:bg-[#5656ff]/70 cursor-pointer" onclick="loadFavourites();">
                        <svg class="w-6 h-6 mr-2 stroke-red-600 fill-red-500" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 2l2.4 7.2h7.6l-6 4.8 2.4 7.2-6-4.8-6 4.8 2.4-7.2-6-4.8h7.6z"/>
                        </svg>
                        Favourite
                    </li>
                    <li class="flex items-center p-2 text-white dark:text-gray-200 hover:bg-blue-400 dark:hover:bg-[#5656ff]/70 cursor-pointer" onclick="loadBookmarks();">
                        üîñ Bookmarks
                    </li>
                    <li class="flex items-center p-2 text-white dark:text-gray-200 hover:bg-blue-400 dark:hover:bg-[#5656ff]/70 cursor-pointer" onclick="renderNotes();"> üìî Notes
                    </li>
                    <li class="flex items-center p-2 text-white dark:text-gray-200 hover:bg-blue-400 dark:hover:bg-[#5656ff]/70 cursor-pointer">üß∞ More Applications
                    </li>
                    <li class="flex items-center p-2 text-white dark:text-gray-200 hover:bg-blue-400 dark:hover:bg-[#5656ff]/70 cursor-pointer">
                        <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/>
                        </svg>
                        Exit
                    </li>
                </ul>
            </section>

            <!-- Theme Toggle Switch -->
            <div class="absolute left-0 bottom-3 flex items-center select-none">
                <span class="hidden text-teal-950 font-bold dark:text-gray-200 mr-2">Light</span>

                <label class="relative inline-block w-16 h-8 cursor-pointer select-none">
                    <input type="checkbox" id="theme-toggle" class="peer hidden">
                    <span
                        class="absolute inset-0 bg-gray-300 peer-checked:bg-blue-500 transition rounded-full"
                    ></span>
                    <span
                        class="absolute left-1 bottom-1 w-6 h-6 bg-white rounded-full transition peer-checked:translate-x-8"
                    ></span>
                </label>

                <span class="text-teal-950 font-bold dark:text-gray-200 ml-2">Theme</span>
            </div>

        </div>
    </section>

        <!-- Sidebar Right -->
    <section id="RightpanelMask" class="bg-slate-700/10 translate-x-full xl:translate-x-0 mt-[8vh] w-fit fixed right-0 transform transition-transform transition-colors duration-700 ease-in-out z-50">
        <div id="Rightpanel" class="relative bg-teal-800 dark:bg-[#69009e] w-[21.9vw] h-[calc(100vh-7vh)] shadow-lg transform translate-x-0 transition-all duration-700 ease-in-out shadow-inner shadow-md">
            <div id="quick-acsess-head" class="flex w-full p-4 text-white dark:text-gray-200 select-none">
            </div>

            <section id="quick-acsess-container" class="h-fit pb-14 max-h-[84%] overflow-y-auto select-text bg-blue-100 dark:bg-lime-400 rounded-[4px] transform transition-all duration-700">
            </section>

            <!-- Tooltip Menu -->
            <div id="rightpanel-tooltip-menu"
                class="absolute hidden -translate-x-[200%] bg-zinc-800 text-white dark:bg-white dark:text-gray-900 border border-gray-700 dark:border-gray-200 text-sm rounded-lg shadow-xl px-3 py-2 z-50 transition-opacity duration-200 opacity-0">

                <div id="tooltip-row" class="flex-row justify-start gap-2">
                    <div class="flex flex-wrap gap-2 w-fit space-x-3 mb-1">
                        <button onclick="handleCopy()" class="hover:text-blue-300 dark:hover:text-blue-600"><p class="flex space-x-1"><svg xmlns="http://www.w3.org/2000/svg" class="size-6 fill-none stroke-green-500 hover:stroke-green-400 mr-1" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                        </svg>Copy</p></button>
                        <button onclick="handleWebSearch()" class="hover:text-green-300 dark:hover:text-green-600">üîçSearch</button>
                        <button onclick="handleSaveNote()" class="hover:text-yellow-300 dark:hover:text-yellow-600">Save</button>
                        <button onclick="handleHighlight()" class="hover:text-yellow-400 dark:hover:text-yellow-600">üñäÔ∏èHighlight</button></span>
                    </div>

                    <div class="flex flex-wrap gap-2 w-fit space-x-3 pt-2 w-fit border-t border-gray-600 dark:border-gray-300">
                        <button onclick="showColorPicker()" class="flex items-center hover:text-purple-400 dark:hover:text-purple-600">
                            <span id="current-color-circle" class="size-6 rounded-full bg-yellow-300 dark:bg-yellow-500 mr-1"></span>
                            <span>Color</span>
                        </button>
                        <button onclick="handleReadAloud()" class="hover:text-pink-400 dark:hover:text-pink-600">
                        üîä Read Aloud
                        </button>
                        <button onclick="handleExport()" class="hover:text-indigo-400 dark:hover:text-indigo-600">
                        üíæ Export
                        </button>
                    </div>
                </div>

                <div id="color-picker-right"
                    class="absolute hidden top-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 p-2 rounded-lg shadow-lg z-50 flex gap-2">
                    <div onclick="setHighlightColor('yellow')"
                        class="size-6 bg-yellow-400 dark:bg-yellow-700 rounded-full cursor-pointer hover:scale-110 transition-transform"></div>
                    <div onclick="setHighlightColor('blue')"
                        class="size-6 bg-blue-400 dark:bg-blue-700 rounded-full cursor-pointer hover:scale-110 transition-transform"></div>
                    <div onclick="setHighlightColor('pink')"
                        class="size-6 bg-pink-400 dark:bg-pink-700 rounded-full cursor-pointer hover:scale-110 transition-transform"></div>
                  <div onclick="setHighlightColor('green')"
                        class="size-6 bg-green-400 dark:bg-green-500 rounded-full cursor-pointer hover:scale-110 transition-transform"></div>
                </div>

            </div>
          </div>
        </div>
    </section>

    <!-- Main Content -->
    <main class="mt-[8.5vh] w-screen max-h-[calc(100vh-0vh)] overflow-y-hidden">
        <div id="reader-wrapper-container" class="relative h-[calc(100vh-7vh)] bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-200 p-6 md:p-10 rounded-xl max-w-3xl mx-auto my-[0vh] shadow-md leading-relaxed prose dark:prose-invert overflow-y-auto ">
              <!-- Floating Reading Progress Section (fixed relative to reader container) -->
              <div class="sticky -top-10 -mt-6 md:-mt-10 z-30 select-none">
                  <div class="flex items-center bg-white dark:bg-[#00557f] backdrop-blur-md py-1 px-6 md:px-10 border-b-2 border-gray-500 dark:border-sky-500 rounded-b-md">
                      <div class="w-full bg-gray-300 dark:bg-white rounded-full h-2 overflow-hidden">
                          <div id="reading-progress-bar"
                              class="bg-blue-500 dark:bg-green-400 h-full w-0 transition-all duration-200"></div>
                      </div>
                      <p id="read-percentage" class="bg-cyan-400 text-black dark:text-slate-700 mx-1 rounded-sm">%</p>

                  </div>
                  </div>

              <!-- Reader Content -->
              <article id="reader-content" class="select-text focus:outline-none mb-4">
              </article>

              <!-- Main Tooltip Menu -->
              <div id="tooltip-menu"
                  class="absolute hidden -translate-x-[200%] bg-gray-900 text-white dark:bg-white dark:text-gray-900 border border-gray-700 dark:border-gray-200 text-sm rounded-lg shadow-xl px-3 py-2 z-50 transition-opacity duration-200 opacity-0">

                  <div id="tooltip-row" class="flex-row justify-start gap-2">
                      <div class="flex flex-wrap gap-2 w-fit space-x-3 mb-1">
                          <button onclick="handleCopy()" class="hover:text-blue-300 dark:hover:text-blue-600"><p class="flex space-x-1"><svg xmlns="http://www.w3.org/2000/svg" class="size-6 fill-none stroke-green-500 hover:stroke-green-400 mr-1" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                          </svg>Copy</p></button>
                          <button onclick="handleWebSearch()" class="hover:text-green-300 dark:hover:text-green-600">üîçSearch</button>
                          <button onclick="handleSaveNote()" class="hover:text-yellow-300 dark:hover:text-yellow-600">Save</button>
                          <button onclick="handleHighlight()" class="hover:text-yellow-400 dark:hover:text-yellow-600">üñäÔ∏èHighlight</button></span>
                      </div>

                      <div class="flex flex-wrap gap-2 w-fit space-x-3 pt-2 w-fit border-t border-gray-600 dark:border-gray-300">
                          <button onclick="showColorPicker()" class="flex items-center hover:text-purple-400 dark:hover:text-purple-600">
                              <span id="current-color-circle" class="size-6 rounded-full bg-yellow-300 dark:bg-yellow-500 mr-1"></span>
                              <span>Color</span>
                          </button>
                          <button onclick="handleReadAloud()" class="hover:text-pink-400 dark:hover:text-pink-600">
                          üîä Read Aloud
                          </button>
                          <button onclick="handleExport()" class="hover:text-indigo-400 dark:hover:text-indigo-600">
                          üíæ Export
                          </button>
                      </div>
                  </div>

                  <div id="color-picker"
                      class="absolute hidden top-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 p-2 rounded-lg shadow-lg z-50 flex gap-2">
                      <div onclick="setHighlightColor('yellow')"
                          class="size-6 bg-yellow-400 dark:bg-yellow-700 rounded-full cursor-pointer hover:scale-110 transition-transform"></div>
                      <div onclick="setHighlightColor('blue')"
                          class="size-6 bg-blue-400 dark:bg-blue-700 rounded-full cursor-pointer hover:scale-110 transition-transform"></div>
                      <div onclick="setHighlightColor('pink')"
                          class="size-6 bg-pink-400 dark:bg-pink-700 rounded-full cursor-pointer hover:scale-110 transition-transform"></div>
                    <div onclick="setHighlightColor('green')"
                          class="size-6 bg-green-400 dark:bg-green-500 rounded-full cursor-pointer hover:scale-110 transition-transform"></div>
                  </div>

              </div>
          </div>

        <!--Note Edit Comment modal-->
        <div id="note-modal" class="bg-slate-700/10 -translate-x-full w-full flex items-center justify-center fixed inset-0 transform transition-transform transition-colors duration-700 ease-in-out z-50">
            <div id="note-box" class="block space-y-4 bg-white dark:bg-slate-900 w-fit min-w-[40vw] max-w-72 h-fit min-h-[40vh] max-h-[calc(100vh-7vh)] shadow-lg transform transition-transform -translate-x-full transition-colors duration-700 ease-in-out shadow-inner shadow-md shadow-sky-300 rounded-lg p-4">
                <h2 class="text-lg text-black dark:text-white font-semibold mb-4">Comment Note</h2>
                <p id="note-text" class="hidden mb-2 text-sm flex-1 mb-4 resize-none rounded-md border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 p-3 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-300 dark:focus:ring-indigo-600 transition-colors"></p>
                <textarea oninput="this.style.height = 'auto'; this.style.height = Math.min(this.scrollHeight, 28 * window.innerHeight / 100) + 'px'; this.scrollTop = this.scrollHeight;" id="note-comment" class="flex-1 w-full mb-4 resize-none rounded-md border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 p-3 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-300 dark:focus:ring-indigo-600 transition-colors duration-700" placeholder="Add comment (optional)"></textarea>
                <div class="flex justify-end mt-4 space-x-3">
                    <button onclick="saveNote()" class="px-4 py-2 text-sm font-medium rounded-md bg-gradient-to-r from-indigo-300 to-indigo-400 dark:from-indigo-600 dark:to-indigo-700 text-white hover:from-indigo-200 hover:to-indigo-300 dark:hover:from-indigo-500 dark:hover:to-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-300 dark:focus:ring-indigo-600 transition-all duration-500">Save</button>
                    <button onclick="closeNoteModal()" class="px-4 py-2 text-sm rounded-md text-gray-700 dark:text-gray-300
                     hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">Cancel</button>
                </div>
            </div>
        </div>

        <!-- Enhanced Modal Overlay -->
        <div id="itemsSelectorModal" class="fixed flex inset-0 z-30 items-center justify-center bg-black/50 dark:bg-white/50 backdrop-blur-sm animate-exit hidden transform transition-all duration-500">
            <!-- Modal Box -->
            <div id="itemsSelectorModalBox" class="relative w-full max-w-xl mt-10 pb-4 max-h-[90vh] overflow-y-hidden rounded-2xl bg-white dark:bg-zinc-950 shadow-2xl transform transition-all duration-500 ease-in-out animate-exit hidden">
                <!-- Modal Header -->
                    <div class="relative sticky top-0 w-full p-2 flex items-center justify-center border-b border-gray-200 dark:border-zinc-700 bg-[#004b6b] dark:bg-zinc-900 shadow-inner shadow-lg transition-colors duration-700">
                        <h2 id="Part-title" class="text-2xl font-bold text-gray-200 dark:text-gray-100 overflow-x-hidden mr-12">Select Items</h2>
                        <button onclick="hideSelectorModal();" class="absolute top-2 right-2 text-gray-200 dark:text-gray-300 hover:text-red-400 dark:hover:text-red-500 transition-colors text-2xl leading-none colors duration-700" aria-label="Close modal" title="Close modal">&times;</button>
                </div>
                <ul id="paper-container" class="divide-y divide-gray-300 dark:divide-zinc-800 px-6 py-1 transition-all duration-700 overflow-y-auto max-h-[90vh]">
                </ul>
            </div>
        </div>

        <div id="action-toast" class="fixed right-0 top-10 transform translate-x-full transition-all duration-500 ease-in-out z-50 bg-white dark:bg-gray-800 text-gray-800 dark:text-white shadow-lg rounded-lg px-4 py-2 flex items-center gap-2 border border-gray-300 dark:border-gray-600 opacity-0 transition-colors duration-700">
            <span id="toast-icon" class="w-5 h-5"></span>
            <span id="toast-message" class="text-sm font-medium">Action completed</span>
        </div>

        <div id="notesModal" class="fixed inset-0 z-50 flex items-center justify-center pointer-events-none">
            <!-- Backdrop -->
            <div id="modalBackdrop" class="absolute inset-0 bg-black/30 backdrop-brightness-50 transition-all duration-500 ease-in-out opacity-0 scale-95"></div>

            <!-- Modal content -->
            <div id="modalContentBox"
                class="relative z-10 min-w-[40vw] w-fit max-w-[60vw] h-fit min-h-[40vh] max-h-[90vh] p-6 bg-white dark:bg-gray-900 text-gray-800 dark:text-white rounded-2xl shadow-xl transform scale-90 translate-y-8 opacity-0 transition-all duration-500 ease-[cubic-bezier(0.22,1,0.36,1)] overflow-hidden">
                <button id="closeModal" class="absolute top-3 right-3 text-gray-500 hover:text-red-500 dark:hover:text-red-400 transition">
                    ‚úñ
                </button>
                <h2 class="text-2xl font-bold mb-4 border-b border-gray-300 dark:border-cyan-400 select-none">üìù Notes</h2>
                <section id="modalContent" class="w-full max-h-[80vh] overflow-y-auto">
                    <p class="text-base leading-relaxed dark:text-gray-300">
                        No note available yet!
                    </p>
                </section>
            </div>
        </div>

    </main>
</body>
<script type="text/javascript" src="js/themes.js"></script>
<script type="text/javascript" src="js/script.js"></script>
<script type="text/javascript" src="js/keyshortcuts.js"></script>
</html>
